# Документация к API проекта Yatube

## Описание

Это REST API для социальной сети **Yatube**, позволяющей публиковать посты, комментировать их, подписываться на других пользователей и создавать сообщества.  
API поддерживает JWT-авторизацию и соответствует спецификации OpenAPI 3.0.

---

## Функционал

- Создание, обновление, удаление и просмотр постов
- Комментирование постов
- Подписка на авторов
- Работа с группами (сообществами)
- JWT-авторизация

---

## Авторизация

Для доступа к защищённым эндпоинтам требуется передача **JWT-токена** в заголовке запроса:

```http
Authorization: Bearer <ваш_токен>
```

### Получение токена:
```http
POST /api/v1/jwt/create/
{
  "username": "string",
  "password": "string"
}
```

---

## Эндпоинты

### Посты (`/api/v1/posts/`)

#### GET — Получить список всех постов
- Пагинация через параметры `limit` и `offset`
- Пример ответа:
```json
[
  {
    "id": 0,
    "author": "string",
    "text": "string",
    "pub_date": "2021-10-14T20:41:29.648Z",
    "image": "string",
    "group": 0
  }
]
```

#### POST — Создать новый пост
- Требуется авторизация
- Обязательное поле: `text`
- Пример тела:
```json
{
  "text": "Новый пост",
  "group": 1
}
```

#### GET `/api/v1/posts/{id}/` — Получить конкретный пост

#### PUT/PATCH `/api/v1/posts/{id}/` — Обновить пост
- Только автор может редактировать
- Пример тела:
```json
{
  "text": "Обновлённый текст"
}
```

#### DELETE `/api/v1/posts/{id}/` — Удалить пост

---

### Комментарии (`/api/v1/posts/{post_id}/comments/`)

#### GET — Получить все комментарии к посту

#### POST — Добавить комментарий
- Обязательное поле: `text`

#### GET `/api/v1/posts/{post_id}/comments/{id}/` — Получить конкретный комментарий

#### PUT/PATCH `/api/v1/posts/{post_id}/comments/{id}/` — Обновить комментарий

#### DELETE `/api/v1/posts/{post_id}/comments/{id}/` — Удалить комментарий

---

### Подписки (`/api/v1/follow/`)

#### GET — Получить список своих подписок

#### POST — Подписаться на пользователя
- Нельзя подписаться на себя
- Пример тела:
```json
{
  "following": "username"
}
```

---

### Сообщества (`/api/v1/groups/`)

#### GET — Получить список сообществ

#### GET `/api/v1/groups/{id}/` — Информация о сообществе

---

### JWT-Авторизация

#### POST `/api/v1/jwt/create/` — Получить токен
```json
{
  "username": "string",
  "password": "string"
}
```

#### POST `/api/v1/jwt/refresh/` — Обновить токен
```json
{
  "refresh": "string"
}
```

#### POST `/api/v1/jwt/verify/` — Проверить токен
```json
{
  "token": "string"
}
```

---

## Модели

### Post
| Поле     | Тип        | Описание             |
|----------|------------|----------------------|
| id       | int        | Уникальный ID        |
| author   | string     | Имя автора           |
| text     | string     | Текст поста          |
| pub_date | datetime   | Дата публикации      |
| image    | file       | Изображение (опц.)   |
| group    | int        | ID группы (опц.)     |

### Comment
| Поле     | Тип        | Описание             |
|----------|------------|----------------------|
| id       | int        | Уникальный ID        |
| author   | string     | Имя автора           |
| text     | string     | Текст комментария    |
| created  | datetime   | Дата создания        |
| post     | int        | ID связанного поста  |

### Group
| Поле        | Тип     | Описание               |
|-------------|---------|------------------------|
| id          | int     | Уникальный ID          |
| title       | string  | Название группы        |
| slug        | string  | Уникальный URL-идентификатор |
| description | string  | Описание группы        |

### Follow
| Поле       | Тип     | Описание                |
|------------|---------|-------------------------|
| user       | string  | Подписчик               |
| following  | string  | Пользователь, на которого подписались |

---

## Права доступа

- Анонимные пользователи могут:
  - Читать посты и группы
- Авторизованные пользователи могут:
  - Писать посты и комментарии
  - Подписываться
- Только автор поста/комментария может:
  - Редактировать или удалять его

---

## Валидации

- Нельзя подписаться на самого себя.
- Все обязательные поля проверяются сервером.
- При попытке изменить чужой контент — 403 Forbidden.

---

## Примеры запросов

### Получить список постов
```bash
GET /api/v1/posts/
```

### Создать пост
```bash
POST /api/v1/posts/
Authorization: Bearer <your_token>
Content-Type: application/json

{
  "text": "Привет, мир!",
  "group": 1
}
```

### Подписаться на пользователя
```bash
POST /api/v1/follow/
Authorization: Bearer <your_token>
Content-Type: application/json

{
  "following": "username"
}
```